@import "@synergycodes/overflow-ui/tokens.css";

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer reset, ext-lib, ui;

@layer ui {
  @layer base, component;
}

:root {
  --wb-transition: 0.1s ease-in;
  --wb-background-color: var(--ax-ui-bg-tertiary-default);

  --wb-scroll-width: 0.375rem;
  --wb-scroll-radius: 0.625rem;
  --wb-scroll-thumb-color: var(--ax-scrollbar-bg-default);
  --wb-scroll-thumb-hover-color: var(--colors-gray-gray-500);
  /* missing token */
  --wb-scroll-track-color: transparent;

  /* Form label variables */
  --ax-public-form-label-color: var(--ax-txt-secondary-default);
  --ax-public-form-label-asterisk-color: var(--ax-txt-error-default);

  /* Loader variables */
  --wb-loader-background-opacity: 1;
  --wb-panel-background-color: var(--ax-ui-bg-primary-default);

  /* Saving status variables */
  --wb-saving-status--in-progress-color: var(--ax-colors-acc1-500);
  /* missing token */
  --wb-saving-status--saved-color: var(--ax-input-stroke-primary-success);
  /* missing token */
  --wb-saving-status--not-saved-color: var(--ax-input-stroke-primary-error);
  /* missing token */

  /* Conditions form variables */
  --wb-conditions-form-border-color: var(--ax-ui-stroke-primary-default);
  /* missing token */
  --wb-conditions-form-border-radius: 0.75rem;
  /* missing token */
  --wb-conditions-form-header-color: var(--ax-public-form-label-color);
  --wb-conditions-form-tag-bg-color: var(--ax-chips-neutral-bg);
  --wb-conditions-form-inputs-background: var(--ax-ui-bg-secondary-default);
  /* missing token */
  --wb-conditions-form-input-background: var(--ax-ui-bg-primary-default);
  /* missing token */
  --wb-conditions-form-input-background-destructive: var(--ax-colors-red-400-10);
  /* missing token */

  /* Branch card variables */
  --wb-branch-card-padding: 0.5rem;
  --wb-branch-card-border-radius: 0.5rem;
  --wb-branch-card-border-width: 0.0625rem;
  --wb-branch-card-border-color: var(--ax-ui-stroke-secondary-default);
  --wb-branch-card-gap: 0.375rem;
  --wb-branch-card-actions-gap: 0.375rem;
  --wb-branch-card-chip-padding: 0.3125rem 0.375rem;
  --wb-branch-card-chip-border-radius: 0.25rem;
  --wb-branch-card-chip-background: var(--ax-ui-stroke-secondary-default);
  --wb-branch-card-chip-color: var(--ax-chips-acc2-txt);
  --wb-branch-card-chip-background-no-conditions: var(--ax-chips-acc2-bg);
  --wb-branch-card-chip-gap: 0.25rem;

  /* Indicator dot variables */
  --wb-indicator-dot-size: 0.75rem;
  --wb-indicator-dot-radius: calc(var(--wb-indicator-dot-size) / 2);
  --wb-indicator-dot-background-color: var(--ax-colors-orange-400);
  /* missing token */
  --wb-indicator-dot-pulse-radius-size: 0.625rem;

  /* Syntax highlighter variables */
  --wb-syntax-highlighter-color: var(--ax-colors-gray-600);
  --wb-syntax-highlighter-color-variable-key: var(--ax-colors-acc5-700);
  --wb-syntax-highlighter-color-variable-value: var(--ax-colors-blue-500);
  --wb-syntax-highlighter-background-color-highlight: var(--ax-colors-green-400-30);
  --wb-syntax-highlighter-color-cursor: var(--ax-colors-blue-500);
  --wb-syntax-highlighter-border-color: hsl(var(--border));
  --wb-syntax-highlighter-border-radius: 0.75rem;

  /* Connectable item variables */
  --wb-connectable-item-horizontal-padding: 0.75rem;
  --wb-connectable-item-vertical-padding: 0.625rem;
  --wb-connectable-item-background: var(--ax-ui-bg-tertiary-default);
  --wb-connectable-item-border-width: 0.0625rem;
  --wb-connectable-item-border-color: var(--ax-input-stroke-primary-default);
  --wb-connectable-item-border-radius: 0.375rem;

  /* Node section variables */
  --wb-node-section-gap: 0.75rem;
  --wb-node-section-padding: 0.625rem;
  --wb-node-section-border-radius: 0.5rem;
  --wb-node-section-border-color: var(--ax-ui-stroke-primary-default);
  --wb-node-section-border-width: 0.0625rem;

  /* Branches container variables */
  --wb-branches-container-gap: 0.25rem;

  /* Import export modal variables */
  --wb-import-error-color: var(--ax-public-snackbar-title-color);
  --wb-import-error-background-color: var(--ax-public-snackbar-error-background);
  --wb-import-error-border: var(--ax-public-snackbar-border-size) solid var(--ax-public-snackbar-error-border);
  --wb-import-error-border-radius: var(--ax-public-snackbar-border-radius);
}

/* Syntax highlighter theme-specific variables */
html[data-theme="light"] {
  --wb-syntax-highlighter-color: var(--ax-colors-gray-600);
  --wb-syntax-highlighter-color-variable-key: var(--ax-colors-acc5-700);
  --wb-syntax-highlighter-color-variable-value: var(--ax-colors-acc1-600);
  --wb-syntax-highlighter-background-color-highlight: var(--ax-colors-green-400-30);
  --wb-syntax-highlighter-color-cursor: var(--ax-txt-secondary-default);
}

html[data-theme="dark"] {
  --wb-syntax-highlighter-color: var(--ax-colors-gray-200);
  --wb-syntax-highlighter-color-variable-key: var(--ax-colors-orange-300);
  --wb-syntax-highlighter-color-variable-value: var(--ax-colors-acc1-400);
  --wb-syntax-highlighter-background-color-highlight: var(--ax-colors-green-400-30);
  --wb-syntax-highlighter-color-cursor: var(--ax-colors-blue-500);
}

/* Ace Editor global styles */
.ace_tooltip {
  display: none !important;
}

/* Ace Editor custom styling for better contrast */
.ace_editor {
  border-radius: 0.75rem;
  background-color: transparent !important;
}

/* Light theme (github) - ensure good contrast */
.ace-github .ace_gutter {
  background: transparent !important;
  color: hsl(var(--muted-foreground)) !important;
}

.ace-github {
  background-color: hsl(var(--background)) !important;
  color: hsl(var(--foreground)) !important;
}

.ace-github .ace_string {
  color: #0ea5e9 !important;
  /* High contrast blue for strings */
}

.ace-github .ace_keyword {
  color: #7c3aed !important;
  /* High contrast purple for keywords */
}

.ace-github .ace_constant.ace_numeric {
  color: #059669 !important;
  /* High contrast green for numbers */
}

.ace-github .ace_constant.ace_language {
  color: #dc2626 !important;
  /* High contrast red for booleans/null */
}

.ace-github .ace_support.ace_function {
  color: #ea580c !important;
  /* High contrast orange for functions */
}

/* Dark theme (monokai) - ensure good contrast */
.ace-monokai {
  background-color: #1e1e1e !important;
  color: #d4d4d4 !important;
}

.ace-monokai .ace_gutter {
  background: transparent !important;
  color: #858585 !important;
}

.ace-monokai .ace_string {
  color: #ce9178 !important;
  /* High contrast orange for strings */
}

.ace-monokai .ace_keyword {
  color: #c586c0 !important;
  /* High contrast purple for keywords */
}

.ace-monokai .ace_constant.ace_numeric {
  color: #b5cea8 !important;
  /* High contrast green for numbers */
}

.ace-monokai .ace_constant.ace_language {
  color: #569cd6 !important;
  /* High contrast blue for booleans/null */
}

.ace-monokai .ace_support.ace_function {
  color: #dcdcaa !important;
  /* High contrast yellow for functions */
}

.ace-monokai .ace_variable {
  color: #9cdcfe !important;
  /* High contrast light blue for variables */
}

/* Custom scroll animations for partner logos */
@keyframes scroll-right {
  0% {
    transform: translateX(-50%);
  }

  100% {
    transform: translateX(0);
  }
}

@keyframes scroll-left {
  0% {
    transform: translateX(0);
  }

  100% {
    transform: translateX(-50%);
  }
}

.animate-scroll-right {
  animation: scroll-right 30s linear infinite;
}

.animate-scroll-left {
  animation: scroll-left 30s linear infinite;
}

/* Smooth bounce animation for buttons */
@keyframes smooth-bounce {

  0%,
  100% {
    transform: translateY(0);
  }

  50% {
    transform: translateY(-8px);
  }
}

.animate-smooth-bounce {
  animation: smooth-bounce 2s ease-in-out infinite;
}

@layer reset {
  ::-webkit-scrollbar {
    width: var(--wb-scroll-width);
  }

  ::-webkit-scrollbar-track {
    border-radius: var(--wb-scroll-radius);
    background: var(--wb-scroll-track-color);
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--wb-scroll-thumb-hover-color);
  }

  ::-webkit-scrollbar-thumb {
    border-radius: var(--wb-scroll-radius);
    background: var(--wb-scroll-thumb-color);
  }

  input[type="number"],
  input[type="time"] {
    -webkit-appearance: textfield;
    -moz-appearance: textfield;
    appearance: textfield;
  }

  input[type="number"]::-webkit-inner-spin-button,
  input[type="number"]::-webkit-outer-spin-button {
    -webkit-appearance: none;
  }

  input[type="time"]::-webkit-calendar-picker-indicator {
    display: none;
  }

  * {
    font-family: "Poppins", sans-serif;
  }

  html,
  body {
    margin: 0;
    background-color: var(--wb-background-color);
    overflow: auto;
    height: 100%;
  }

  /* body[data-scroll-locked] {
    margin-right: 0 !important;
    margin-left: 0 !important;
    overflow: visible !important;
  } */

  button {
    cursor: pointer;
  }

  .react-flow.is-segment-dragged * {
    cursor: copy;
  }
}

@layer base {
  :root {
    /* Light mode - white: #ffffff, gray: #eeeff3, blue: #1296e7 */
    --background: 0 0% 100%;
    /* #ffffff */
    --foreground: 0 0% 9%;
    /* dark text */
    --card: 0 0% 100%;
    /* #ffffff */
    --card-foreground: 0 0% 9%;
    --popover: 0 0% 100%;
    /* #ffffff */
    --popover-foreground: 0 0% 9%;
    --primary: 199 87% 49%;
    /* #1296e7 - main blue */
    --primary-foreground: 0 0% 100%;
    /* white text on blue */
    --secondary: 228 11% 94%;
    /* #eeeff3 - light gray */
    --secondary-foreground: 0 0% 9%;
    --muted: 228 11% 94%;
    /* #eeeff3 */
    --muted-foreground: 0 0% 45%;
    --accent: 228 11% 94%;
    /* #eeeff3 */
    --accent-foreground: 0 0% 9%;
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;
    --border: 228 11% 94%;
    /* #eeeff3 */
    --input: 228 11% 94%;
    /* #eeeff3 */
    --ring: 199 87% 49%;
    /* #1296e7 - focus ring */
    --chart-1: 199 87% 49%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
    --radius: 0.5rem;
  }

  .dark {
    /* Dark mode - black: #151516, gray: #27282b, blue: #1296e7 */
    --background: 0 0% 8%;
    /* #151516 - dark black */
    --foreground: 0 0% 98%;
    /* light text */
    --card: 0 2% 15%;
    /* #27282b - dark gray */
    --card-foreground: 0 0% 98%;
    --popover: 0 2% 15%;
    /* #27282b */
    --popover-foreground: 0 0% 98%;
    --primary: 199 87% 49%;
    /* #1296e7 - main blue */
    --primary-foreground: 0 0% 100%;
    /* white text on blue */
    --secondary: 0 2% 15%;
    /* #27282b - dark gray */
    --secondary-foreground: 0 0% 98%;
    --muted: 0 2% 15%;
    /* #27282b */
    --muted-foreground: 0 0% 64%;
    --accent: 0 2% 15%;
    /* #27282b */
    --accent-foreground: 0 0% 98%;
    --destructive: 0 63% 31%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 2% 15%;
    /* #27282b */
    --input: 0 2% 15%;
    /* #27282b */
    --ring: 199 87% 49%;
    /* #1296e7 - focus ring */
    --chart-1: 199 87% 49%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
  }

  .theme {
    --animate-aurora: aurora 8s ease-in-out infinite alternate;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
  }

  /* Consistent hover and focus effects */
  button:not(:disabled) {
    @apply transition-all duration-200;
  }

  button:not(:disabled):hover {
    @apply shadow-md;
  }

  input:focus,
  textarea:focus,
  select:focus {
    @apply ring-2 ring-ring ring-offset-2 transition-all duration-200;
  }

  /* Card and panel hover effects */
  [role="dialog"],
  [role="menu"],
  [role="listbox"] {
    @apply shadow-xl transition-all duration-300;
  }

  /* Workflow node borders */
  .workflow-node-with-border {
    border: 2px solid #e5e7eb;
    /* gray-200 */
    border-radius: 0.75rem;
    box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  }

  .dark .workflow-node-with-border {
    border-color: #3f4144;
    /* gray-700 dark */
  }

  /* Remove all focus styles from inputs with border-none class */
  input.border-none:focus,
  input.border-none:focus-visible {
    outline: none !important;
    border: none !important;
    box-shadow: none !important;
  }
}

@keyframes aurora {
  0% {
    background-position: 0% 50%;
    transform: rotate(-5deg) scale(0.9);
  }

  25% {
    background-position: 50% 100%;
    transform: rotate(5deg) scale(1.1);
  }

  50% {
    background-position: 100% 50%;
    transform: rotate(-3deg) scale(0.95);
  }

  75% {
    background-position: 50% 0%;
    transform: rotate(3deg) scale(1.05);
  }

  100% {
    background-position: 0% 50%;
    transform: rotate(-5deg) scale(0.9);
  }
}

@layer utilities {
  .animate-aurora {
    animation: var(--animate-aurora, aurora 8s ease-in-out infinite alternate);
    background-size: 200% auto;
  }
}